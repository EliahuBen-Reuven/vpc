---

copyright:
  years: 2017, 2018, 2019

lastupdated: "2019-02-20"

---

{:shortdesc: .shortdesc}
{:new_window: target="_blank"}
{:codeblock: .codeblock}
{:pre: .pre}
{:screen: .screen}
{:tip: .tip}
{:note: .note}
{:download: .download}
{:DomainName: data-hd-keyref="DomainName"}

# 關於 VPC Infrastructure 資源
{: #about-vpc-infrastructure-resources}

_資源_ 一詞指的是 {{site.data.keyword.cloud}} Virtual Private Cloud 部署的元件部分。每個 VPC 都可以包含下列類型的資源，而這些資源可以視需要進行分組：

* **vpc**
* **實例**
* **金鑰**
* **映像檔**
* **子網路**
* **磁區**
* **acl**
* **安全群組**
* **浮動 IP**
* **vnic**
* **閘道**
* **負載平衡器**
* **vpn**

您可以將大部分這些類型的資源視為其 VPC 的「子項」，因為它們從其「母項」VPC 取得許多控管其使用的授權原則（如下節的摘要表格中所示）。

異常狀況是 `loadbalancer` 及 `vpn` 資源類型維護它們自己的授權原則。本文件稍後會提供 VPN 及「負載平衡器」資源的資源授權詳細資料。
{: note}

## 資源原則

一般而言，VPC 中資源的存取權是透過_原則_ 所控制。如果您要自訂 VPC 資源的存取權，則可以建立自訂的原則。資源原則可以將目標設為：

* 所有資源
* 某類型的所有資源
* 群組中的所有資源
* 個別資源

## 資源及資源群組
_資源群組_ 是基於建立授權和使用而建立關聯的資源集合（例如整個 VPC 或是單一子網路及其 ACL）。您可以將資源群組視為可能由專案、部門或團隊使用的基礎架構集合。

大型企業可能希望將一個 VPC 分割成數個資源群組。較小的公司可能不需要將其 VPC 分割為數個資源群組，因為其團隊全部都會使用整個 VPC。如果您熟悉 _OpenStack_，則資源群組的概念類似 _OpenStack Keystone_ 中的_專案_。

「只」有在建立 VPC 時，才能將資源指派給資源群組。建立資源群組之後，資源就無法變更資源群組。
{: .note}

資源群組主要是針對大型組織所設計。對於大部分公司及團隊而言，資源分組位於 VPC 界限上。可能將個別 VSI（實例）指派給資源群組，以及可能將個別使用者指派給 VSI（實例）資源時，此一般經驗法則可能會變更。

當您設定 IBM Cloud VPC 時，如果要使用資源群組，則最好事先備妥方案，以瞭解如何將資源以及組織中的使用者指派給每個資源群組。
{: tip}

## VPC 的特性

目前，VPC 僅針對該特定 VPC 內的任何或所有資源，指派 VPC 界限的角色及存取權。例如，您無法指派該 VPC 內個別子網路的存取權。相反地，具有 VPC 之所有資源類型（子網路、實例、浮動 IP、安全群組、ACL 等）的授權，都是繼承自該資源的 VPC「母項」。特定資源（例如**負載平衡器**及 **vpn**）會與所連接的 VPC 分開維護授權。

### 依資源類型的 VPC 資源授權

此表格彙總預設情況下 VPC 資源的授權方式。

| 資源類型 | 其預設授權的取得位置 |
|-----------|------------|
| VPC | 建立時的授權檢查 |
| 負載平衡器 | 建立時的授權檢查 |
| VPN | 建立時的授權檢查 |
| 子網路 | 母項 VPC |
| 公用閘道 | 母項 VPC |
| 實例 | 母項 VPC |
| 安全群組 | 母項 VPC |
| 金鑰 | 帳戶 |
| 映像檔 | 帳戶 |
| 浮動 IP | 帳戶 |
| ACL | 帳戶 |
| 磁區 | N/A |

如果未指派，則可以在帳戶層次的範圍內建立「浮動 IP」及 ACL。不過，只要將浮動 IP 指派給實例，或將 ACL 指派給子網路，這些資源就會變成 VPC 的授權範圍。
{: note}

### 資源的角色及授權動作的 VPC 涵蓋範圍

在具有 2 個 VPC 的情境中，以下這些範例說明任何具有特定角色的使用者嘗試執行特定動作時會發生的情況：

* 使用者 _admin_，具有所有資源的**管理者**許可權
  * 建立 `vpc1`：正常

* 使用者 _editor_，具有所有資源的**編輯者**許可權
  * 建立 `vpc2`：正常
  * 更新 `vpc2`：正常
  * 刪除 `vpc2`：正常

* 使用者 _operator_，具有所有資源的**操作員**許可權
  * 建立 `vpc`：拒絕
  * 更新 `vpc1`：拒絕
  * 刪除 `vpc1`：拒絕

* 使用者 _viewer_，具有所有資源的**檢視者**許可權
  * 列出 VPC：請查看 [vpc1]
  * 讀取 `vpc1`：正常

* 使用者 _noRole_，沒有任何原則
  * 列出 VPC：請查看 []
  * 讀取 `vpc1`：拒絕

### VPC 涵蓋範圍摘要表格

對於任何依角色（「管理者」、「編輯者」、「操作員」、「檢視者」）授與存取權的原則，提供下列動作（X=拒絕、o=正常）

 角色：     | 無   | 檢視者 | 操作員| 編輯者 | 管理者
-----------:|------|--------|-------|--------|-------
建立        | X    | X      | X     | o      | o
列出        | X    | o      | X     | o      | o
讀取        | X    | o      | X     | o      | o
更新        | X    | X      | X     | o      | o
刪除        | X    | X      | X     | o      | o


## 適用於 VPC 的 VPN 的資源授權

**適用於 VPC 的 VPN** 的資源授權與其他類型的 VPC 資源授權分開設定，但方式類似。

「適用於 VPC 的 VPN」中的原則控制對 VPN 資源的存取權，特別是「VPN 閘道」。擁有「VPN 閘道」的存取權並**不**表示您也有權存取其子項資源（例如 VPN 連線或本端及對等節點 CIDR）。IKE 及 IPsec 原則獨立於「VPN 閘道」，而不受閘道的原則控管。VPN 中的資源原則可以將目標設為：

* 所有 VPN 閘道
* 個別 VPN 閘道

「VPN 閘道」也可以是資源群組的一部分。如果您有權存取特定資源群組，則也有權存取該群組內的「VPN 閘道」。

VPN 用量也會分別計費。
{: note}

### 資源的角色及授權動作的「適用於 VPC 的 VPN」涵蓋範圍

支援的使用者角色與 VPC 資源授權中支援的使用者角色相同，但針對每個角色啟用不同的動作。

以下這些範例說明具有特定角色的使用者嘗試執行特定 VPN 相關動作時會發生的情況：

* 使用者 _admin_，具有所有資源的**管理者**許可權
  * 建立、更新、刪除、讀取、列出「VPN 閘道」：正常
  * 建立、更新、刪除、讀取、列出「VPN 連線」：正常
  * 建立、更新、刪除、讀取、列出「VPN 連線對等節點及本端 CIDR」：正常
  * 建立、更新、刪除、讀取、列出「IKE 原則」：正常
  * 建立、更新、刪除、讀取、列出「IPSec 原則」：正常

* 使用者 _editor_，具有所有資源的**編輯者**許可權
  * 與「管理者」的作業相同

* 使用者 _operator_，具有所有資源的**操作員**許可權
  * 建立、更新、刪除「VPN 閘道」：拒絕
  * 建立、更新、刪除「VPN 連線」：拒絕
  * 建立、更新、刪除「VPN 連線對等節點及本端 CIDR」：拒絕
  * 建立、更新、刪除「IKE 原則」：拒絕
  * 建立、更新、刪除「IPSec 原則」：拒絕
  * 讀取、列出「VPN 閘道」：正常 - 請查看實際資料
  * 讀取、列出「VPN 連線」：正常 - 請查看實際資料
  * 讀取、列出「VPN 連線對等節點及本端 CIDR」：正常 - 請查看實際資料
  * 讀取、列出「IKE 原則」：正常 - 請查看實際資料
  * 讀取、列出「IPSec 原則」：正常 - 請查看實際資料

* 使用者 _viewer_，具有所有資源的**檢視者**許可權
  * 與「操作員」的作業相同

* 使用者 _noRole_，沒有任何原則
  * 讀取、列出「VPN 閘道」：拒絕 - 請查看空的資料
  * 讀取、列出「VPN 連線」：拒絕 - 請查看空的資料
  * 讀取、列出「VPN 連線對等節點及本端 CIDR」：拒絕 - 請查看空的資料
  * 讀取、列出「IKE 原則」：拒絕 - 請查看空的資料
  * 讀取、列出「IPSec 原則」：拒絕 - 請查看空的資料

### 「適用於 VPC 的 VPN」涵蓋範圍摘要表格

透過下表，可以將「適用於 VPC 的 VPN」中的動作角色對映視覺化（X=拒絕、o=正常）：

 角色：     | 無   | 檢視者 | 操作員| 編輯者 | 管理者
-----------:|------|--------|-------|--------|-------
建立        | X    | X      | X     | o      | o
列出        | X    | o      | o     | o      | o
讀取        | X    | o      | o     | o      | o
更新        | X    | X      | X     | o      | o
刪除        | X    | X      | X     | o      | o

## 適用於 VPC 的負載平衡器的資源授權

**適用於 VPC 的負載平衡器**用量的資源授權與 VPC 中的其他資源授權分開設定，但方式類似。

「負載平衡器」用量也會分別計費。
{: note}

### 資源的角色及授權動作的負載平衡器涵蓋範圍

以下這些範例說明具有特定角色的使用者嘗試執行與「VPC 負載平衡器」相關的特定動作時會發生的情況：

* 使用者 _admin_，具有所有資源的**管理者**許可權
  * 建立、更新、刪除、讀取、列出「負載平衡器」：正常
  * 建立、更新、刪除、讀取、列出「接聽器」：正常
  * 建立、更新、刪除、讀取、列出「儲存區」：正常
  * 建立、更新、刪除、讀取、列出「成員」：正常
  * 建立、更新、刪除、讀取、列出「負載平衡器統計資料」：正常

* 使用者 _editor_，具有所有資源的**編輯者**許可權
  * 與「管理者」的作業相同

* 使用者 _operator_，具有所有資源的**操作員**許可權
  * 建立、更新、刪除、讀取、列出「負載平衡器」：拒絕
  * 建立、更新、刪除、讀取、列出「接聽器」：拒絕
  * 建立、更新、刪除、讀取、列出「儲存區」：拒絕
  * 建立、更新、刪除、讀取、列出「成員」：拒絕
  * 建立、更新、刪除、讀取、列出「負載平衡器統計資料」：拒絕

* 使用者 _viewer_，具有所有資源的**檢視者**許可權
  * 讀取、列出「負載平衡器」：正常
  * 讀取、列出「接聽器」：正常
  * 讀取、列出「儲存區」：正常
  * 讀取、列出「成員」：正常
  * 讀取「負載平衡器統計資料」：正常

* 使用者 _noRole_，沒有任何原則
  * 讀取、列出「負載平衡器」：拒絕 - 列出會顯示空的資料
  * 讀取、列出「接聽器」：拒絕
  * 讀取、列出「儲存區」：拒絕
  * 讀取、列出「成員」：拒絕
  * 讀取「負載平衡器統計資料」：拒絕

### 負載平衡器涵蓋範圍摘要表格

透過下表，可以將「適用於 VPC 的負載平衡器」中的動作角色對映視覺化（X=拒絕、o=正常）：

 角色：     | 無   | 檢視者 | 操作員| 編輯者 | 管理者
-----------:|------|--------|-------|--------|-------
建立        | X    | X      | X     | o      | o
列出        | X    | o      | X     | o      | o
讀取        | X    | o      | X     | o      | o
更新        | X    | X      | X     | o      | o
刪除        | X    | X      | X     | o      | o
